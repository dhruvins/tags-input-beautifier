/*!
 * =======================================================
 *  SIMPLEST TAGS INPUT BEAUTIFIER 2.1.2
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var tags = new TIB(document.querySelector('input'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,t,n){function y(e){return t.createElement(e)}function x(e){return Object.keys(e)}function C(e){return x(e).length}var i="__instance__",r=setTimeout,a="innerHTML",s="textContent",o="className",f="classes",u="toLowerCase",l="replace",c="firstChild",p="parentNode",g="nextSibling",d="previousSibling",v="appendChild",h="insertBefore",b="removeChild",m="setAttribute",w="getAttribute",j="preventDefault",k="addEventListener";!function(e){e.version="2.1.2",e[i]={},e.each=function(t,n){return r(function(){var r,n=e[i];for(r in n)t(n[r],r,n)},0===n?0:n||1),e}}(e[n]=function(t,T){function O(){B.focus()}function H(e){var n,t=e?this:B;r(function(){n=t[s].split(L.join);for(K in n)_.set(n[K],1)},1)}var B,K,_=this,D=Date.now(),E=t.placeholder||"",L={join:", ",max:9999,escape:[",","\n"],alert:!0,text:["Delete “%s” Tag","Duplicate “%s” Tag"],classes:["tags","tag","tags-input","tags-output","tags-view"],update:function(){}},N=y("span"),S=y("span"),A="data-tag";e[n][i][t.id||t.name||C(e[n][i])]=_,T="string"==typeof T?{join:T}:T||{};for(K in L)"undefined"!=typeof T[K]&&(L[K]=T[K]);t[o]=L[f][3],N[o]=L[f][0]+" "+L[f][0]+"-"+D,N[k]("click",O,!1),N.id=L[f][0]+"-"+(t.id||D),N[a]='<span class="'+L[f][4]+'"></span>',S[o]=L[f][2],S[a]='<span contenteditable spellcheck="false" style="white-space:nowrap;outline:none;"></span><span>'+E+"</span>",t[p][h](N,t[g]||null),N[c][v](S),B=S[c],_.tags={},_.error=0,_.filter=function(e){return(e+"")[l](new RegExp("["+L.join[l](/\s/g,"")+"]|\\s{2,}|^\\s+|\\s+$","g"),"")[u]()},_.update=function(e,n){for(t.value="";(K=N[c][c])&&K[w](A);)N[c][b](K);e=0!==e?e:x(_.tags);for(K in e)_.set(e[K],1,n);return L.update(_),_},_.reset=function(e){return e=_.filter(e||""),e?delete _.tags[e]:_.tags={},_.update(0,1)},_.set=function(e,n,i){if(e=_.filter(e),""===e||C(_.tags)===L.max)return B[a]="",_;var r=y("span"),s=y("a");if(r[o]=L[f][1],r[m](A,e),s.href="javascript:;",s.title=(L.text[0]||"")[l](/%s/g,e),s[k]("click",function(e){var t=this,n=t[p],i=t[p][w](A);n[p][b](n),_.reset(i),O(),e[j]()},!1),r[v](s),_.tags[e]){if(B[a]="",i)N[c][h](r,S);else if(L.alert){_.error=1;var u=(L.text[1]||e)[l](/%s/g,e);"function"==typeof L.alert?L.alert(u,e,_):alert(u)}}else _.tags[e]=1,N[c][h](r,S);return t.value=x(_.tags).join(L.join),n&&(B[a]=""),!i&&L.update(_),_},function(){return B[k]("blur",function(){_.error=0,_.set(this[s]),this[a]=""},!1),B[k]("paste",H,!1),B[k]("keydown",function(e){_.error=0;var y,t=this,n=e.keyCode,i=N,o=(e.key||String.fromCharCode(n))[u](),f=e.ctrlKey,l=e.shiftKey,c=S[d]&&S[d][w](A),v=B[g],h="tab"===o||!l&&9===n,b="enter"===o||!l&&13===n,m=" "===o||!l&&32===n,k="backspace"===o||!l&&8===n;if(f&&b){for(;i=i[p];)if("form"===i.nodeName[u]()){y=i;break}_.set(t[s],1),0===_.error&&y&&y.submit()}else if(f&&("v"===o||!l&&86===n))H();else if(!t[s]&&k)_.reset(c),O();else{var C,T,x=L.escape;for(K in x)if(C=x[K],T="s"===C,(T||"	"===C)&&h||(T||"\n"===C)&&b||(T||" "===C)&&m)return r(function(){_.set(t[s],1),O()},1),void e[j]();r(function(){var n,e=t[s];for(v[a]=e?"":E,K=0,n=x.length;n>K;++K)if(x[K]&&-1!==e.indexOf(x[K])){_.set(e.split(x[K]).join(""),1);break}},1)}},!1),_}(),_.update(t.value.split(L.join),1),_.config=L,_.input=S,_.view=N,_.target=_.output=t})}(window,document,"TIB");