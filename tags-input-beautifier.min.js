/*!
 * =======================================================
 *  SIMPLEST TAGS INPUT BEAUTIFIER 2.1.0
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var tags = new TIB(document.querySelector('input'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,t,n){function y(e){return t.createElement(e)}function x(e){return Object.keys(e)}function C(e){return x(e).length}var i="__instance__",a=setTimeout,s="innerHTML",r="textContent",o="className",f="classes",u="toLowerCase",l="replace",c="firstChild",p="parentNode",g="nextSibling",d="previousSibling",v="appendChild",h="insertBefore",b="removeChild",m="setAttribute",k="getAttribute",j="preventDefault",w="addEventListener";!function(e){e.version="2.1.0",e[i]={},e.each=function(t,n){return a(function(){var a,n=e[i];for(a in n)t(n[a],a,n)},0===n?0:n||1),e}}(e[n]=function(t,T){function K(){B.focus()}function R(e){var n,t=e?this:B;a(function(){n=t[r].split(N.join);for(A in n)_.set(n[A],1)},1)}var B,A,_=this,D=Date.now(),E=t.placeholder||"",N={join:", ",max:9999,escape:[",","\n"],alert:!0,text:["Delete “%s” Tag","Duplicate “%s” Tag"],classes:["tags","tag","tags-input","tags-output","tags-view"],update:function(){}},L=y("span"),S=y("span"),O="data-tag";e[n][i][t.id||t.name||C(e[n][i])]=_,T="string"==typeof T?{join:T}:T||{};for(A in N)"undefined"!=typeof T[A]&&(N[A]=T[A]);t[o]=N[f][3],L[o]=N[f][0]+" "+N[f][0]+"-"+D,L[w]("click",K,!1),L.id=t.id||N[f][0]+"-"+D,L[s]='<span class="'+N[f][4]+'"></span>',S[o]=N[f][2],S[s]='<span contenteditable spellcheck="false" style="white-space:pre;outline:none;"></span><span>'+E+"</span>",t[p][h](L,t[g]||null),L[c][v](S),B=S[c],_.tags={},_.error=0,_.filter=function(e){return(e+"")[l](new RegExp("["+N.join[l](/\s/g,"")+"]|^\\s+|\\s+$|\\s{2,}","g"),"")[u]()},_.update=function(e,n){for(t.value="";(A=L[c][c])&&A[k](O);)L[c][b](A);e=0!==e?e:x(_.tags);for(A in e)_.set(e[A],1,n);return N.update(_),_},_.reset=function(e){return e=_.filter(e||""),e?delete _.tags[e]:_.tags={},_.update(0,1)},_.set=function(e,n,i){if(e=_.filter(e),""===e||C(_.tags)===N.max)return B[s]="",_;var a=y("span"),r=y("a");if(a[o]=N[f][1],a[m](O,e),r.href="javascript:;",r.title=N.text[0][l](/%s/g,e)||"",r[w]("click",function(e){var t=this,n=t[p],i=t[p][k](O);n[p][b](n),_.reset(i),K(),e[j]()},!1),a[v](r),_.tags[e]){if(B[s]="",i)L[c][h](a,S);else if(N.alert){_.error=1;var u=N.text[1][l](/%s/g,e);"function"==typeof N.alert?N.alert(u,e,_):alert(u)}}else _.tags[e]=1,L[c][h](a,S);return t.value=x(_.tags).join(N.join),n&&(B[s]=""),!i&&N.update(_),_},function(){return B[w]("blur",function(){_.error=0,_.set(this[r]),this[s]=""},!1),B[w]("paste",R,!1),B[w]("keydown",function(e){_.error=0;var m,t=this,n=e.keyCode,i=L,o=(e.key||String.fromCharCode(n))[u](),f=e.ctrlKey,l=e.shiftKey,c=S[d]&&S[d][k](O),v=B[g],h="tab"===o||!l&&9===n,b="enter"===o||!l&&13===n;if(f&&b){for(;i=i[p];)if("form"===i.nodeName[u]()){m=i;break}_.set(t[r],1),0===_.error&&m&&m.submit()}else if(f&&("v"===o||!l&&86===n))R();else{var w=N.escape;for(A in w)if("	"===w[A]&&h||"\n"===w[A]&&b)return a(function(){_.set(t[r],1),K()},1),void e[j]();a(function(){var i,e=t[r];if(v[s]=e?"":E,e||"backspace"!==o&&(l||8!==n)){for(A=0,i=w.length;i>A;++A)if(w[A]&&-1!==e.indexOf(w[A])){_.set(e.split(w[A]).join(""),1);break}}else _.reset(c),K()},1)}},!1),_}(),_.update(t.value.split(N.join),1),_.config=N,_.input=S,_.view=L,_.target=_.output=t})}(window,document,"TIB");