/*!
 * =======================================================
 *  SIMPLEST TAGS INPUT BEAUTIFIER 2.1.3
 * =======================================================
 *
 *   Author: Taufik Nurrohman
 *   URL: https://github.com/tovic
 *   License: MIT
 *
 * -- USAGE: ---------------------------------------------
 *
 *   var tags = new TIB(document.querySelector('input'));
 *
 * -------------------------------------------------------
 *
 */
!function(e,t,n){function y(e){return t.createElement(e)}function x(e){return Object.keys(e)}function C(e){return x(e).length}var i="__instance__",r=setTimeout,s="innerHTML",a="textContent",o="className",f="classes",u="toLowerCase",l="replace",c="firstChild",p="parentNode",g="nextSibling",d="previousSibling",v="appendChild",h="insertBefore",b="removeChild",m="setAttribute",w="getAttribute",j="preventDefault",k="addEventListener";!function(e){e.version="2.1.3",e[i]={},e.each=function(t,n){return r(function(){var r,n=e[i];for(r in n)t(n[r],r,n)},0===n?0:n||1),e}}(e[n]=function(t,D){function H(){B.focus()}function I(e){var n,t=e?this:B;r(function(){n=t[a].split(L.join);for(K in n)_.set(n[K])},1)}var B,K,O,_=this,T=Date.now(),E=t.placeholder||"",L={join:", ",max:9999,escape:[",","\n"],alert:!0,text:["Delete “%s”","Duplicate “%s”"],classes:["tags","tag","tags-input","tags-output","tags-view"],update:function(){}},N=y("span"),S=y("span"),A="data-tag";e[n][i][t.id||t.name||C(e[n][i])]=_,D="string"==typeof D?{join:D}:D||{};for(K in L)"undefined"!=typeof D[K]&&(L[K]=D[K]);t[o]=L[f][3],N[o]=L[f][0]+" "+L[f][0]+"-"+T,N[k]("click",H,!1),N.id=L[f][0]+"-"+(t.id||T),N[s]='<span class="'+L[f][4]+'"></span>',S[o]=L[f][2],S[s]='<span contenteditable spellcheck="false" style="white-space:nowrap;outline:none;"></span><span>'+E+"</span>",t[p][h](N,t[g]||null),N[c][v](S),B=S[c],_.tags={},_.error=0,_.filter=function(e){return(e+"")[l](new RegExp("["+L.join[l](/\s/g,"")+"]|\\s{2,}|^\\s+|\\s+$","g"),"")[u]()},_.update=function(e,n){for(t.value="";(K=N[c][c])&&K[w](A);)N[c][b](K);if(0===e)e=x(_.tags);else{for(K in e)O=_.filter(e[K]),O&&(_.tags[O]=1);e=x(_.tags)}_.tags={};for(K in e)_.set(e[K],n);return L.update(_),_},_.reset=function(e){return e=_.filter(e||""),e?delete _.tags[e]:_.tags={},_.update(0,1)},_.set=function(e,n){if(e=_.filter(e),""===e||C(_.tags)===L.max)return B[s]="",_;var i=y("span"),r=y("a");if(i[o]=L[f][1],i[m](A,e),r.href="javascript:;",r.title=(L.text[0]||"")[l](/%s/g,e),r[k]("click",function(e){var t=this,n=t[p],i=t[p][w](A);n[p][b](n),_.reset(i),H(),e[j]()},!1),i[v](r),B[s]="",B[g][s]=E,_.tags[e]){if(n)N[c][h](i,S);else if(L.alert){_.error=1;var a=(L.text[1]||e)[l](/%s/g,e);"function"==typeof L.alert?L.alert(a,e,_):alert(a)}}else _.tags[e]=1,N[c][h](i,S);return t.value=x(_.tags).join(L.join),!n&&L.update(_),_},function(){return B[k]("blur",function(){_.error=0,_.set(this[a])},!1),B[k]("paste",I,!1),B[k]("keydown",function(e){_.error=0;var y,t=this,n=e.keyCode,i=N,o=(e.key||String.fromCharCode(n))[u](),f=e.ctrlKey,l=e.shiftKey,c=S[d]&&S[d][w](A),v=B[g],h="tab"===o||!l&&9===n,b="enter"===o||!l&&13===n,m=" "===o||!l&&32===n,k="backspace"===o||!l&&8===n;if(!f&&b){for(;i=i[p];)if("form"===i.nodeName[u]()){y=i;break}_.set(t[a]),0===_.error&&y&&y.submit()}else if(f&&("v"===o||!l&&86===n))I();else if(!t[a]&&k)_.reset(c),H();else{var C,D,x=L.escape;for(K in x)if(C=x[K],D="s"===C,(D||"	"===C)&&h||(D||"\n"===C)&&b||(D||" "===C)&&m)return r(function(){_.set(t[a]),H()},1),void e[j]();r(function(){var e=t[a];for(v[s]=e?"":E,K=0,O=x.length;O>K;++K)if(x[K]&&-1!==e.indexOf(x[K])){_.set(e.split(x[K]).join(""));break}},1)}},!1),_}(),_.update(t.value.split(L.join),1),_.config=L,_.input=S,_.view=N,_.target=_.output=t})}(window,document,"TIB");