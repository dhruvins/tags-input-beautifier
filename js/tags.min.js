/*! Taufik Nurrohman <https://github.com/tovic> */var Tags=function(e,t){var a=this,n=function(e){return document.createElement(e)},i={join:", ",max:9999,values:[],d_text:"Duplicate \u201C%s\u201D Tag",x_text:"Remove \u201C%s\u201D Tag",i_class:"tags-input",o_class:"tags-output",w_class:"tags",update:function(){}};a.tags={},"string"==typeof t&&(t={join:t});for(var r in i)void 0===t[r]&&(t[r]=i[r]);a.input=e,a.config=t,a.output=!1,a.sanitize=function(e){return e.replace(/,|\s{2,}/g,"").toLowerCase()},a.clear=function(){a.input.value=""},a.add=function(i){var r=e.previousSibling,s=n("span"),u=n("a");s.innerHTML=i,u.title=t.x_text.replace(/%s/g,i),u.setAttribute("data-tag",i),u.href="#tag:remove",u.innerHTML="&times",u.onclick=function(){return delete a.tags[this.getAttribute("data-tag")],this.parentNode.parentNode.removeChild(this.parentNode),a.refresh(),!1},s.appendChild(u),r.appendChild(s),a.tags[i]=1},a.refresh=function(){var e=Object.keys(a.tags).join(t.join);a.output!==!1&&(a.output.value=e),t.update(a.tags)},a.draw=function(){var e=a.input,i=e.name,r=n("label");a.output=n("input"),a.output.name=i,a.output.type="hidden",a.input.removeAttribute("name"),e.className+=" "+t.i_class,r.className=t.w_class,r.innerHTML='<span class="'+t.o_class+'"></span>',e.parentNode.insertBefore(r,e),r.appendChild(e),r.appendChild(a.output);for(var s in t.values)a.add(a.sanitize(t.values[s]))},a.beautify=function(){a.draw(),a.clear(),e.onkeydown=function(n){var i=e.previousSibling,r=n.keyCode,s=a.sanitize(this.value);if(""===s&&8===r){var u=i.lastChild;if(u){var o=u.children[0].getAttribute("data-tag");i.removeChild(u),delete a.tags[o]}return a.refresh(),!1}return n.shiftKey||188!==r?void 0:(a.clear(),""===s||Object.keys(a.tags).length===t.max?!1:s in a.tags?(alert(t.d_text.replace(/%s/g,s)),a.clear(),!1):(a.add(s),a.refresh(),!1))},a.refresh()}};